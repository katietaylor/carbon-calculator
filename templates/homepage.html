{% extends 'base.html' %}

{% block title %} CO2 Dashboard {% endblock %}

{% block content %}

<h1>Homepage</h1>
{% for message in get_flashed_messages() %}
    <div>{{ message }}</div>
{% endfor %}

<table class="table">
    <tr>
        <th></th>
        <th colspan = "3">Electricity</th>
        <th colspan = "3">Natural Gas</th>
        <th colspan = "3">Trips</th>
        <th colspan = "3">Total</th>
        
    </tr>
    <tr>
        <th></th>
        <th>CO2 Total</th> 
        <th>CO2 Avg per Month</th>
        <th>CO2 Avg per Day</th>
        <th>CO2 Total</th> 
        <th>CO2 Avg per Month</th>
        <th>CO2 Avg per Day</th>
        <th>CO2 Total</th> 
        <th>CO2 Avg per Month</th>
        <th>CO2 Avg per Day</th>
        <th>CO2 Total</th> 
        <th>CO2 Avg per Month</th>
        <th>CO2 Avg per Day</th>
    </tr>
    {% for year in years %}
    <tr>
        <td><strong>{{ year }}</strong></td> 
        {% if summary["kwh"].get(year) %}
            <td>{{ summary["kwh"][year]["total"] }}</td>
            <td>{{ summary["kwh"][year]["monthly_avg"] }}</td> 
            <td>{{ summary["kwh"][year]["daily_avg"] }}</td> 
        {% else %}
            <td>--</td>
            <td>--</td> 
            <td>--</td> 
        {% endif %}

        {% if summary["ng"].get(year) %}
            <td>{{ summary["ng"][year]["total"] }}</td>
            <td>{{ summary["ng"][year]["monthly_avg"] }}</td> 
            <td>{{ summary["ng"][year]["daily_avg"] }}</td> 
        {% else %}
            <td>--</td>
            <td>--</td> 
            <td>--</td> 
        {% endif %}

        {% if summary["trip"].get(year) %}
            <td>{{ summary["trip"][year]["total"] }}</td>
            <td>{{ summary["trip"][year]["monthly_avg"] }}</td> 
            <td>{{ summary["trip"][year]["daily_avg"] }}</td> 
        {% else %}
            <td>--</td>
            <td>--</td> 
            <td>--</td> 
        {% endif %}

    </tr>
    {% endfor %}
 </table><br>

<div id="co2-by-source-chart"> 
    <h3>How much does each CO2 source contribute to your total footprint?</h3>

    <form action="/select-year">
        <select name="year", id="donut-year">
        <option selected="selected">ALL YEARS</option>
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
    </form>

    <canvas id="donutChart"></canvas>
</div>
<br><br>


<div id="co2-trend-chart">
    <h3>Carbon footprint per month</h3>

    <form action="/select-year">
        <select name="year", id="trend-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
    </form>

    <canvas id="lineGraph"></canvas>
</div>
<br><br>

<div id="co2-by-day-of-week">
    <h3>What day of the week do you have the highest footprint?</h3>
    <form action="/select-year">
        <select name="year", id="weekday-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
    </form>
    <canvas id="weekdayBarChart"></canvas>
</div>

<div id="co2-by-location">
    <h3>Your Electricity Carbon Footprint varies by location.</h3>
    <h4>Change the location to see what your footprint would be if you moved.</h4>

    <form action="/get-zipcode">
        <select name="year", id="location-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
        
        New City <input type="text" name="city" id="city"placeholder="City", required>
        State <input type="text" name="state" id="state" placeholder="State", maxlength="2" required> <br>
        <input type="text" name="zipcode" id="zipcode" hidden> <br>
        <input type="submit" id="new-location-button" value="See Comparison">
    </form>

    <h3><div id="comparison-statement"></div></h3>

    <table id="location-comparison" class = "table table-condensed" hidden>
        <tr>
            <th></th>
            <th>Current Location</th> 
            <th>New Location</th>
        </tr>
        <tr>
            <td>Year Total</td>
            <td id="current-yr-total"></td>
            <td id="new-yr-total"></td>
        </tr>
        <tr>
            <td>Daily Rate</td>
            <td id="current-dly-rate"></td>
            <td id="new-dly-rate"></td>
        </tr>
    </table>

    <canvas id="locationBarChart"></canvas>
</div>


<div id="co2-by-car">
    <h3>Your Transportation Carbon Footprint varies by car type.</h3>
    <h4>Choose a car to see what your footprint would be drove a different car.</h4>

    <form action="/co2-other-car.json">
        Look at data for year:
        <select name="trip_year", id="trip-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select><br>
        Compare against this car: <select name="car", id="my-car">
        {% for usercar in usercars %}
            <option value="{{ usercar.usercar_id }}">
            {{ usercar.make }} {{ usercar.model }} {{ usercar.year }}</option>
        {% endfor %}
        </select><br><br>
        
        <strong>Find a new car</strong><br>
        Make: <select name="make", id="make" required>
        <option selected="selected" disabled="disabled">SELECT CAR MAKE</option>
        {% for make in makes %}
            <option value="{{ make }}">{{ make }}</option>
        {% endfor %}
        </select><br>
        Model: <select name="model", id="model" required disabled></select><br>
        Year: <select name="car_year", id="car-year" required disabled></select><br>
        Cylinders (optional): <select name="cylinders", id="cylinders" disabled></select><br>
        Transmission (optional): <select name="transmission", id="transmission" disabled></select><br>
    
        <input type="submit" id="new-car-button" value="See Comparison">
    </form>

    <h3><div id="car-comparison-statement"></div></h3>

    <table id="car-comparison" hidden>
        <tr>
            <th></th>
            <th>Current car</th> 
            <th>New Car</th>
        </tr>
        <tr>
            <td>Year Total</td>
            <td id="currentCar-yr-total"></td>
            <td id="newCar-yr-total"></td>
        </tr>
        <tr>
            <td>Daily Rate</td>
            <td id="currentCar-dly-rate"></td>
            <td id="newCar-dly-rate"></td>
        </tr>
    </table>

    <canvas id="carBarChart"></canvas>
</div>



<script type="text/javascript" src="static/homepage.js"></script>
<script type="text/javascript" src="static/car-dropdowns.js"></script>

{% endblock %}