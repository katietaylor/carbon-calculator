{% extends 'base.html' %}

{% block title %} CO2 Dashboard {% endblock %}

{% block content %}

<div class="container-fluid page-head">   
  <div class="heading">
    <h1>{{ name }}'s Carbon Footprint </h1>
  </div>
</div>
<br>

{% for message in get_flashed_messages() %}
    <div>{{ message }}</div>
{% endfor %}

{% if co2_per_yr.get(this_year) %}
    <h3>Your Carbon Footprint is {{ co2_per_yr[this_year]["yr_projected"] }} pounds per year.</h3>

    <h4>It takes {{ trees }} trees to offset that much CO<sub>2</sub></h4>
    &#x1f333;
{% endif %}
<br>
<br>


<div id="co2-per-year">
    <h3>Your Carbon Footprint per year</h3>
    <div class="graph-canvas">
        <canvas id="yearBarChart"></canvas>
    </div>
</div>

<div id="co2-by-source-chart"> 
    <h3>How much does each CO<sub>2</sub> source contribute to your total footprint?</h3>

    <form action="/select-year">
        <select name="year", id="donut-year">
        <option selected="selected">ALL YEARS</option>
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
    </form>

    <canvas id="donutChart"></canvas>
</div>
<br><br>


<div id="co2-trend-chart">
    <h3>Carbon footprint per month</h3>

    <form action="/select-year">
        <select name="year", id="trend-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
    </form>
    <div class="graph-canvas">
        <canvas id="lineGraph"></canvas>
    </div>
</div>
<br><br>

<div id="co2-by-day-of-week">
    <h3>What day of the week do you have the highest footprint?</h3>
    <form action="/select-year">
        <select name="year", id="weekday-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select>
    </form>
    <div class="graph-canvas"><canvas id="weekdayBarChart"></canvas></div>
</div>

<div id="co2-by-location">
    <h3>Your Electricity Carbon Footprint varies by location.</h3>
    <h4>Change the location to see what your footprint would be if you moved.</h4><br>

    <form action="/get-zipcode">
      <div class="row">
        <div class="col-sm-2">
          <div class="form-group">
            <label for="location-year">Choose Year</label>
            <select name="year", id="location-year" class="form-control">
            {% for year in years %}
                <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
            </select>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <label for="city">New City</label>    
            <input type="text" name="city" id="city" class="form-control" placeholder="City", required>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label for="state">State</label>
            <input type="text" name="state" id="state" class="form-control" placeholder="State", maxlength="2" required>
          </div>
        </div>
        <input type="text" name="zipcode" id="zipcode" hidden>
        <div class="col-sm-2 locationComparisonButton">
          <input type="submit" class="btn" id="new-location-button" value="See Comparison">
      </div>
      </div>
        
    </form>

    <h3><div id="comparison-statement"></div></h3>

    <table id="location-comparison" class = "table table-condensed" hidden>
        <tr>
            <th></th>
            <th>Current Location</th> 
            <th>New Location</th>
        </tr>
        <tr>
            <td>Year Total</td>
            <td id="current-yr-total"></td>
            <td id="new-yr-total"></td>
        </tr>
        <tr>
            <td>Daily Rate</td>
            <td id="current-dly-rate"></td>
            <td id="new-dly-rate"></td>
        </tr>
    </table>

    <div class="graph-canvas"><canvas id="locationBarChart"></canvas></div>
</div>


<div id="co2-by-car">
    <h3>Your Transportation Carbon Footprint varies by car type.</h3>
    <h4>Choose a car to see what your footprint would be drove a different car.</h4>

    <form action="/co2-other-car.json">
        Look at data for year:
        <select name="trip_year", id="trip-year">
        {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
        </select><br>
        Compare against this car: <select name="car", id="my-car">
        {% for usercar in usercars %}
            <option value="{{ usercar.usercar_id }}">
            {{ usercar.make }} {{ usercar.model }} {{ usercar.year }}</option>
        {% endfor %}
        </select><br><br>
        
        <strong>Find a new car</strong><br>
        Make: <select name="make", id="addMake" required>
        <option selected="selected" disabled="disabled">SELECT CAR MAKE</option>
        {% for make in makes %}
            <option value="{{ make }}">{{ make }}</option>
        {% endfor %}
        </select><br>
        Model: <select name="model", id="addModel" required disabled></select><br>
        Year: <select name="car_year", id="addCarYear" required disabled></select><br>
        Cylinders (optional): <select name="cylinders", id="addCylinders" disabled></select><br>
        Transmission (optional): <select name="transmission", id="addTransmission" disabled></select><br>
    
        <input type="submit" id="new-car-button" value="See Comparison">
    </form>

    <h3><div id="car-comparison-statement"></div></h3>

    <table id="car-comparison" hidden>
        <tr>
            <th></th>
            <th>Current car</th> 
            <th>New Car</th>
        </tr>
        <tr>
            <td>Year Total</td>
            <td id="currentCar-yr-total"></td>
            <td id="newCar-yr-total"></td>
        </tr>
        <tr>
            <td>Daily Rate</td>
            <td id="currentCar-dly-rate"></td>
            <td id="newCar-dly-rate"></td>
        </tr>
    </table>

    <div class="graph-canvas"><canvas id="carBarChart"></canvas></div>
</div>



<script type="text/javascript" src="static/homepage.js"></script>
<script type="text/javascript" src="static/car-dropdowns.js"></script>

{% endblock %}